<!-- -*- mode: js; -*-
    -->

    <!-- 
TODO:
  Sun!

  Lots of iffiness with safari. - solved most of them
  
-->
<!DOCTYPE html>
    <html lang="en">
    <head>
    <title>67P/Churyumovâ€“Gerasimenko viewer</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
    body {
	background:#000;
	color:#fff;
	padding:0;
	margin:0;
	overflow:hidden;
	font-family:georgia;
	text-align:center;
    }
    .loader {
	position: fixed;
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: 9999;
	background: url('images/support/wait.gif') 50% 50% no-repeat rgb(0,0,0);
}

</style>
 
    
    <div id="container">
    <div id="progress">
    </div>

    </div>


    <script src="js/three.min.js"></script>
    <script src="js/BinaryLoader.js"></script>
    <script src="js/Detector.js"></script>
    <script src="js/TrackballControls.js"></script>
    <script src="js/OrbitControls.js"></script>
    <!-- script src="js/AnaglyphEffect.js"></script> -->
    <script src="js/stats.min.js"></script>

    <script type="text/javascript" src="js/jquery.min.js"></script>

    <script type="text/javascript" src="js/dat.gui.min.js"></script>


    
    <script id="fragment_shader" type="x-shader/x-fragment">
         #ifdef GL_ES
           precision highp float;
         #endif

         uniform sampler2D t0;
uniform sampler2D t1;
uniform sampler2D t2;
uniform sampler2D t3;
uniform sampler2D t4;
uniform sampler2D t5;
uniform sampler2D t6;
uniform sampler2D t7;
uniform sampler2D t8;
uniform sampler2D t9;
uniform sampler2D t10;

         varying vec2 vUv;

         void main(void)
         {
             vec3 c;
             vec4 C0 = texture2D(t0, vUv);
	     vec4 C1 = texture2D(t1, vUv);
	     vec4 C2 = texture2D(t2, vUv);
	     vec4 C3 = texture2D(t3, vUv);
	     vec4 C4 = texture2D(t4, vUv);
	     vec4 C5 = texture2D(t5, vUv);
	     vec4 C6 = texture2D(t6, vUv);
	     vec4 C7 = texture2D(t7, vUv);
	     vec4 C8 = texture2D(t8, vUv);
	     vec4 C9 = texture2D(t9, vUv);
	     vec4 C10 = texture2D(t10, vUv);
	    
           //c = Ca.rgb * Ca.a + Cb.rgb * Cb.a * (1.0 - Ca.a);
             c = C0.rgb +
		 C1.rgb*C1.a + 
		 C2.rgb*C2.a +
		 C3.rgb*C3.a +
		 C4.rgb*C4.a +
		 C5.rgb*C5.a +
		 C6.rgb*C6.a + 
		 C7.rgb*C7.a +
		 C8.rgb*C8.a +
		 C9.rgb*C9.a +
		 C10.rgb*C10.a ;
		 
             gl_FragColor= vec4(c,1.0);
    
         }

</script>

 <script id="fragment_shader8" type="x-shader/x-fragment">
         #ifdef GL_ES
           precision highp float;
         #endif

         uniform sampler2D t0;
uniform sampler2D t1;
uniform sampler2D t2;
uniform sampler2D t3;
uniform sampler2D t4;
uniform sampler2D t5;
uniform sampler2D t6;
uniform sampler2D t7;



         varying vec2 vUv;

         void main(void)
         {
             vec3 c;
             vec4 C0 = texture2D(t0, vUv);
	     vec4 C1 = texture2D(t1, vUv);
	     vec4 C2 = texture2D(t2, vUv);
	     vec4 C3 = texture2D(t3, vUv);
	     vec4 C4 = texture2D(t4, vUv);
	     vec4 C5 = texture2D(t5, vUv);
	     vec4 C6 = texture2D(t6, vUv);
	     vec4 C7 = texture2D(t7, vUv);
	 
	    
           //c = Ca.rgb * Ca.a + Cb.rgb * Cb.a * (1.0 - Ca.a);
             c = C0.rgb +
		 C1.rgb*C1.a + 
		 C2.rgb*C2.a +
		 C3.rgb*C3.a +
		 C4.rgb*C4.a +
		 C5.rgb*C5.a +
		 C6.rgb*C6.a + 
		 C7.rgb*C7.a;
		 
             gl_FragColor= vec4(c,1.0);
    
         }

    </script>

   
    <script id="vertex_shader" type="x-shader/x-vertex">
             varying vec2 vUv;

         void main()
         {
            vUv = uv;
            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
            gl_Position = projectionMatrix * mvPosition;
         }


    </script>

    <!-- This fires up the start screen -->
    <div class="loader"></div>

    <! and this closes it when the time comes -->
    <script type="text/javascript">
          $(window).load(function() {
        	$(".loader").fadeOut("slow");
     })
     </script>
    
    <script type="text/javascript" language="javascript" src="data/fits.json"></script>
    <script type="text/javascript" language="javascript" src="models/67P_HD_2015-05-09-r10_var.js"></script> 

  
    <script type="text/javascript" language="javascript" src="js/main.js"></script>
   


    
</heaad>
    <body>
    
    </body>
    </html>
